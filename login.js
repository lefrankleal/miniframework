$(function(){altair_login_page.init();altair_form_validation_login.init()});var $login_card=$("#login_card"),$login_form=$("#login_form"),$login_help=$("#login_help"),$register_form=$("#register_form"),$login_password_reset=$("#login_password_reset");altair_login_page={init:function(){var login_form_show=function(){$login_form.show().siblings().hide()};var register_form_show=function(){$register_form.show().siblings().hide()};var login_help_show=function(){$login_help.show().siblings().hide()};var password_reset_show=function(){$login_password_reset.show().siblings().hide()};$("#login_help_show").on("click",function(e){e.preventDefault();altair_md.card_show_hide($login_card,undefined,login_help_show,undefined)});$("#signup_form_show").on("click",function(e){e.preventDefault();$(this).fadeOut("280");altair_md.card_show_hide($login_card,undefined,register_form_show,undefined)});$(".back_to_login").on("click",function(e){e.preventDefault();$("#signup_form_show").fadeIn("280");altair_md.card_show_hide($login_card,undefined,login_form_show,undefined)});$("#password_reset_show").on("click",function(e){e.preventDefault();altair_md.card_show_hide($login_card,undefined,password_reset_show,undefined)});$("#password_reset_show").on("click",function(e){e.preventDefault();console.log("hello");return})}};altair_form_validation_login={init:function(){var $form_login=$("#form_login");$form_login.parsley().on("form:validated",function(){altair_md.update_input($form_login.find(".md-input-danger"))}).on("field:validated",function(parsleyField){if($(parsleyField.$element).hasClass("md-input")){altair_md.update_input($(parsleyField.$element))}}).on("form:submit",function(e){var data={username:$("#login_username").val(),password:$("#login_password").val()};$.ajax({url:"/api/User/LoginUser",type:"POST",headers:{"Content-Type":"application/json","Cache-Control":"no-cache",Authorization:"Public-Access"},dataType:"json",data:JSON.stringify(data),beforeSend:function(){altair_helpers.content_preloader_show("md")},success:function(res){localStorage.setItem("token",res[0].token);localStorage.setItem("user",JSON.stringify(res[0]));setTimeout(function(){altair_helpers.content_preloader_hide();window.location.href="/"+LANG+"/p/main/"},1500)},error:function(res){altair_helpers.content_preloader_hide();$("#error_message").html(eval(JSON.parse(res.responseText).message));$("#error_message").removeAttr("hidden")}});return false});window.Parsley.on("field:validate",function(){var $server_side_error=$(this.$element).closest(".md-input-wrapper").siblings(".error_server_side");if($server_side_error){$server_side_error.hide()}})}};